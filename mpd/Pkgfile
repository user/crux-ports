# Description: Music Player Daemon
# URL:         http://www.musicpd.org/
# Maintainer:  Ilya Solovyov, solovyov at pm dot me
# Depends on:  boost dbus flac libmpdclient libid3tag libmad

name=mpd
version=0.22
release=1
source=(http://www.musicpd.org/download/mpd/0.22/$name-$version.tar.xz)

build() {
	cd $name-$version

	meson --prefix=/usr . build --buildtype=plain \
		-Dalsa=enabled \
		-Ddbus=enabled \
		-Dflac=enabled \
		-Did3tag=enabled \
		-Dlibmpdclient=enabled \
		-Dmad=enabled \
		-Dchromaprint=disabled \
		-Ddocumentation=disabled \
		-Dffmpeg=disabled \
		-Djack=disabled \
		-Dhtml_manual=false \
		-Dmanpages=false \
		-Dmpg123=disabled \
		-Dneighbor=false \
		-Dnfs=disabled \
		-Dopenal=disabled \
		-Doss=disabled \
		-Dpulse=disabled \
		-Dsndio=disabled \
		-Dsmbclient=disabled \
		-Dsystemd=disabled \
		-Dudisks=disabled \
		-Dzeroconf=disabled

	ninja -C build
	DESTDIR=$PKG ninja -C build install

	rm -rf $PKG/usr/share/{doc,icons}
	install -D -m 0644 doc/mpdconf.example $PKG/usr/share/mpd/mpdconf.example
}

